<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Student Exam Performance Predictor</title>

  <!-- Bootstrap (CDN) for quick styling -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(180deg,#f6f9ff 0%, #eef4ff 100%);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      padding-top: 40px;
    }
    .card {
      max-width: 820px;
      margin: 0 auto;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(17,24,39,0.06);
    }
    .form-label {
      font-weight: 600;
    }
    .result-box {
      margin-top: 18px;
    }
    .required-star { color: #d00; margin-left:2px; }
  </style>
</head>
<body>

  <main class="container">
    <div class="card p-4 mt-4">
      <div class="d-flex align-items-center mb-3">
        <div>
          <h1 class="h4 mb-0">Student Exam Performance Indicator</h1>
          <div class="text-muted small">Predict the student's maths score from demographics and other test scores</div>
        </div>
      </div>

      <!-- Form -->
      <form id="predictForm" action="{{ url_for('predict_datapoint') }}" method="post" novalidate>
        <!-- Note: Keep server-side validation in your Flask route as well. -->

        <div class="row g-3">
          <div class="col-md-6">
            <label for="gender" class="form-label">Gender <span class="required-star">*</span></label>
            <select id="gender" name="gender" class="form-select" required>
              <option selected disabled value="">Select your Gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="col-md-6">
            <label for="ethnicity" class="form-label">Race / Ethnicity <span class="required-star">*</span></label>
            <select id="ethnicity" name="ethnicity" class="form-select" required>
              <option selected disabled value="">Select Ethnicity</option>
              <option value="group A">Group A</option>
              <option value="group B">Group B</option>
              <option value="group C">Group C</option>
              <option value="group D">Group D</option>
              <option value="group E">Group E</option>
            </select>
          </div>

          <div class="col-md-6">
            <label for="parental" class="form-label">Parental Level of Education <span class="required-star">*</span></label>
            <select id="parental" name="parental_level_of_education" class="form-select" required>
              <option selected disabled value="">Select Parent Education</option>
              <option value="associate's degree">Associate's degree</option>
              <option value="bachelor's degree">Bachelor's degree</option>
              <option value="high school">High school</option>
              <option value="master's degree">Master's degree</option>
              <option value="some college">Some college</option>
              <option value="some high school">Some high school</option>
            </select>
          </div>

          <div class="col-md-6">
            <label for="lunch" class="form-label">Lunch Type <span class="required-star">*</span></label>
            <select id="lunch" name="lunch" class="form-select" required>
              <option selected disabled value="">Select Lunch Type</option>
              <option value="free/reduced">Free / Reduced</option>
              <option value="standard">Standard</option>
            </select>
          </div>

          <div class="col-md-6">
            <label for="test_prep" class="form-label">Test Preparation Course <span class="required-star">*</span></label>
            <select id="test_prep" name="test_preparation_course" class="form-select" required>
              <option selected disabled value="">Select Test Course</option>
              <option value="none">None</option>
              <option value="completed">Completed</option>
            </select>
          </div>

          <div class="col-md-6">
            <label for="reading_score" class="form-label">Reading Score (out of 100)</label>
            <input id="reading_score" name="reading_score" type="number" min="0" max="100" step="1"
                   class="form-control" placeholder="e.g. 78" aria-describedby="readingHelp" />
            <div id="readingHelp" class="form-text">Optional but improves prediction accuracy.</div>
          </div>

          <div class="col-md-6">
            <label for="writing_score" class="form-label">Writing Score (out of 100)</label>
            <input id="writing_score" name="writing_score" type="number" min="0" max="100" step="1"
                   class="form-control" placeholder="e.g. 72" aria-describedby="writingHelp" />
            <div id="writingHelp" class="form-text">Optional but improves prediction accuracy.</div>
          </div>

          <div class="col-12 mt-2">
            <button type="submit" class="btn btn-primary">Predict Maths Score</button>
            <button type="reset" class="btn btn-outline-secondary ms-2">Reset</button>
          </div>
        </div>
      </form>

      <!-- Prediction output (Jinja) -->
      <div class="result-box">
        {% if results is defined %}
          <div class="alert alert-info" role="alert">
            <strong>Prediction:</strong> {{ results }}
          </div>
        {% endif %}
      </div>

      <footer class="text-muted small mt-3">
        Tip: Provide reading & writing scores (0–100) for a more accurate prediction.
      </footer>
    </div>
  </main>

  <!-- Optional: client-side validation to ensure number inputs are within 0-100 -->
  <script>
    (function () {
      const form = document.getElementById('predictForm');

      form.addEventListener('submit', function (e) {
        // validate numeric ranges
        const numFields = ['reading_score', 'writing_score'];
        for (const id of numFields) {
          const el = document.getElementById(id);
          if (!el) continue;
          const val = el.value.trim();
          if (val !== '') {
            const n = Number(val);
            if (!Number.isFinite(n) || n < 0 || n > 100) {
              e.preventDefault();
              el.focus();
              alert('Please enter a valid number between 0 and 100 for ' + el.previousElementSibling.innerText);
              return false;
            }
          }
        }
        // allow submission — server should still validate everything
      });
    })();
  </script>

  <!-- Bootstrap JS (optional, for dropdowns etc.) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
